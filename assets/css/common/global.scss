@mixin loader{
    background: linear-gradient(90deg, #f5f5f5 33.33%, #ececec 66.66%,#f5f5f5 );
    background-size: 300% 100%;
    animation: move-background 2s infinite;
}

*{
    margin: 0;
    padding:0;
    box-sizing:border-box;
}

body{
    min-height: 100vh;
    background: linear-gradient(165deg,$background-primary,$background-accent,$background-primary);
    background-repeat: no-repeat;
}

#app{
    font-family: 'Kodchasan','Istok Web', sans-serif;
    min-height: inherit;
    font-size: 1.15em;
    color:$primary-text;
}

.question{
    $question: &;

    margin: 0 auto;
    display: flex;
    flex-flow: row wrap;
    justify-content: space-between;
    padding: 20px;
    max-width: 800px;
    min-height: inherit;
    align-content: center;
    transition: align-content .2s;

    @media #{$small-screen}{
        justify-content: center;
        align-content: flex-start;
    }

    .button{
        position: absolute;
        bottom: 20px;
        left: calc(50% - 50px);
        padding: 10px 35px;
    }

    &__score{
        list-style: none;
        margin-top: 20px;
        display: flex;
        justify-content: center;

        .rating{
            padding: 0 10px;
        }
    }

    &__body,
    &__options{
        flex-basis: calc(50% - 10px);
        max-width: 400px;

        @media #{$small-screen}{
            flex-basis: 100%;
        }
    }

    &__body{
        $root : &;
        max-width: 400px;
        position: relative;
        transform-style: preserve-3d;
        perspective: 1500px;
        overflow: visible;

        #{$question}.answered &{
            &__face--front{
                transform: rotateY(-180deg);
            }
    
            &__face--back{
                transform: rotateY(0deg);
            }
        }

        &__face{
            transition: transform .5s;
            transform-origin: center center;
            backface-visibility: hidden;
            border-radius: 5px;
            box-shadow: 0 0 50px rgba(0,0,0,.15);
            width: 100%;

            &.loader{
                @include loader;
            }
            
            &--front{
                transform: rotateY(0deg);
            }

            &--back{
                position: absolute;
                top: 0;
                left: 0;
                transform: rotateY(180deg);
                background-color: $white;
                height: 100%;
                padding: 20px;
                color: $primary-text;
            }
        }
    }

    &__image{
      background-image: url("pic.png");
      background-color: $white;
      background-size: 50% auto;
      background-repeat: no-repeat;
      background-position: center;
      width: 100%;
      border-top-left-radius: inherit;
      border-top-right-radius: inherit;

      &.loader{
        background:transparent;
      }

      &::after{
          display: block;
          padding-bottom: 100%;
          content: "";
      }
    }

    &__wording{
        position: relative;
        padding: 15px;
        color: $white;
        background-color: $primary-color;
        border-bottom-left-radius: inherit;
        border-bottom-right-radius: inherit;

        &::before{
            position: absolute;
            top: -25px;
            left: 0;
            display: block;
            content: "";
            height: 30px;
            width: 100%;
            background: url(../images/wave.svg)  no-repeat;
            background-size: cover;
            background-position-x: 30%;
            transform: rotateX(180deg);
        }

        &.loader svg{
            border-radius: 5px;
        }
    }

    &__narration{
        padding-bottom: 20px;
    }

    &__options{
        align-self: flex-start;
        list-style: none;
        display:flex;
        flex-flow: row wrap;
        justify-content: space-between;

        #{$question}.answered &{
            display: none;
        }
    }

    &__option{
        $root : &;
        
        -webkit-user-select:none;
        flex-basis: 100%;
        text-align: center;
        position: relative;
        padding: 15px;
        border-radius: 5px;
        box-shadow: 0 0 50px rgba(0,0,0,.15);
        margin-top: 20px;
        background-color: $white;
        background-size: 20%;
        background-repeat: no-repeat;
        transition: transform 100ms, background-color .5s;

        &.loader{
            @include loader;
            padding: 25px;
        }

        &:first-of-type{
            margin-top: 0;

            @media #{$small-screen}{
                margin-top: 20px;
            }
        }

        &--incorrect{
            text-decoration: line-through;
            background-color: rgba(red,.5);
            color:#751f1f;
        }

        &:hover:not(#{$root}--incorrect){
            transform: scale(1.015);
            cursor: pointer;
        }

        &:active:not(#{$root}--incorrect){
            box-shadow: 0 0 1px rgba(0,0,0,.15);
            transform: scale(1);
            background-clip: padding-box;     
        }

        &__icon{
            position: absolute;
            left: 15px;
            fill: #a02121;

            svg{
                width:25px; 
                height:25px;
            }
        }
    }
}

.rating{

    i svg{
        width: 40px;
        height: 40px;
        stroke:darken($gold,10%);
        fill: transparent
    }

    &--filled{
        i svg path,i svg{
            fill:$gold;
        }
    }
}

.score, .welcome{
    padding: 20px;
    margin: 0 auto;
    max-width: 600px;
    display: flex;
    min-height: inherit;

    &__inner{
        padding: 20px;
        background-color: $white;
        box-shadow: 0 0 50px rgba(0,0,0,.15);
        border-radius: 5px;
        align-self: center;
        justify-self: center;
        width: 100%;
        text-align: center;
    }

    &__message{
        padding-bottom: 20px;
        font-size: 1.35em;
    }
}

.button{
    font-family: inherit;
    border: none;
    padding: 10px 35px;
    background: $primary-color;
    line-height: 1;
    border-radius: 3px;
    font-size: inherit;
    color: $white;
    outline: none;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,0,0,.15);

    &:active{
        box-shadow: 0 0 1px rgba(0,0,0,.5);
    }    
}

.spin-in{
    transform: scale(0) rotate(360deg);
    transform-origin: center;
    animation : spin-in .5s;
    animation-fill-mode: forwards;
}

@keyframes spin-in{
   90%{
       transform: scale(1) rotate(0deg);
   }
   95%{
    transform: scale(1.1) rotate(0deg);
   }
   100%{
    transform: scale(1) rotate(0deg);
   }
}

@keyframes move-background{
    0%{
        background-position: 150% 0;
    }
    100%{
        background-position:0% 0;
    }
}
